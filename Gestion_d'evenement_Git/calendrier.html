<!DOCTYPE html>
<html>
  <head>
    <title>Connectez-vous - Super calendrier</title>
    <link rel="stylesheet" href="fullcalendar.min.css">
    <link rel="stylesheet" type="text/css" href="style_utilisation.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
  </head>
  <body>
    <div id="calendar"></div>
    <script src="main.js"></script>
    <script>
    const calendarEl = document.getElementById('calendar');
const calendar = new FullCalendar.Calendar(calendarEl, {
  themeSystem: 'bootstrap',
  headerToolbar: {
    left: 'prev,next today',
    center: 'title',
    right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
  },
  initialView: 'dayGridMonth',
  events: [
    {
      title: 'Mon événement',
      start: '2023-04-01'
    },
    {
      title: 'Mon autre événement',
      start: '2023-04-07T16:30:00'
    }
  ]
});
calendar.render();
const userId = auth.currentUser.uid;
const eventsRef = ref(database, 'users/' + userId + '/events');
get(eventsRef).then((snapshot) => {
  snapshot.forEach((childSnapshot) => {
    const event = childSnapshot.val();
    const eventObj = {
      title: event.titre,
      start: event.date + 'T' + event.time,
      allDay: false
    };
    calendar.addEvent(eventObj);
  });
}).catch((error) => {
  console.error(error);
  alert('Une erreur est survenue lors de la récupération des événements');
});
</script>
    </body>
    </html>